# Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.paymentClientBackend.register-health-indicator=true
resilience4j.circuitbreaker.instances.paymentClientBackend.sliding-window-size=100
resilience4j.circuitbreaker.instances.paymentClientBackend.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.paymentClientBackend.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.paymentClientBackend.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.paymentClientBackend.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.paymentClientBackend.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.paymentClientBackend.event-consumer-buffer-size=10

resilience4j.circuitbreaker.instances.walletClientBackend.register-health-indicator=true
resilience4j.circuitbreaker.instances.walletClientBackend.sliding-window-size=100
resilience4j.circuitbreaker.instances.walletClientBackend.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.walletClientBackend.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.walletClientBackend.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.walletClientBackend.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.walletClientBackend.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.walletClientBackend.event-consumer-buffer-size=10

# Retry Configuration
resilience4j.retry.instances.paymentClientBackend.max-attempts=3
resilience4j.retry.instances.paymentClientBackend.wait-duration=500ms
resilience4j.retry.instances.paymentClientBackend.enable-exponential-backoff=true
resilience4j.retry.instances.paymentClientBackend.exponential-backoff-multiplier=2
resilience4j.retry.instances.paymentClientBackend.randomization-factor=0.5
resilience4j.retry.instances.paymentClientBackend.retry-exceptions=[java.net.SocketTimeoutException,java.io.IOException]

resilience4j.retry.instances.walletClientBackend.max-attempts=3
resilience4j.retry.instances.walletClientBackend.wait-duration=500ms
resilience4j.retry.instances.walletClientBackend.enable-exponential-backoff=true
resilience4j.retry.instances.walletClientBackend.exponential-backoff-multiplier=2
resilience4j.retry.instances.walletClientBackend.randomization-factor=0.5
resilience4j.retry.instances.walletClientBackend.retry-exceptions=[java.net.SocketTimeoutException,java.io.IOException]

# Time Limiter Configuration
# Must be longer than Feign's connect timeout (5s) + read timeout (10s) to allow Feign timeouts to trigger first
resilience4j.timelimiter.instances.paymentClientBackend.timeout-duration=13s
resilience4j.timelimiter.instances.walletClientBackend.timeout-duration=13s
